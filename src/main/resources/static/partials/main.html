<div ng-controller="MainController as $mainController">
    <div class="panel panel-default">
        <div class="panel-heading clearfix">
            <h4 class="panel-title pull-left">Museums</h4>
        </div>
        <div class="panel-body">
            <form class="form-inline">
                <div class="form-group pull-right">
                    <input type="text" ng-model="searchMuseum" class="form-control" placeholder="Search">
                </div>
            </form>
            <table class="table table-striped table-hover">
                <thead>
                <tr>
                    <th ng-click="$mainController.museumSort('name')">Name
                        <span class="glyphicon sort-icon" ng-show="$mainController.museumSortKey=='name'" ng-class="{'glyphicon-chevron-up':$mainController.museumReverse,'glyphicon-chevron-down':!$mainController.museumReverse}"/></th>
                    <th ng-click="$mainController.museumSort('neighborhood.name')">Neighborhood
                        <span class="glyphicon sort-icon" ng-show="$mainController.museumSortKey=='neighborhood.name'" ng-class="{'glyphicon-chevron-up':$mainController.museumReverse,'glyphicon-chevron-down':!$mainController.museumReverse}"/></th>
                    <th>Address</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr dir-paginate="museum in $mainController.museums|orderBy:$mainController.museumSortKey:$mainController.museumReverse|filter:searchMuseum|itemsPerPage:5"
                    pagination-id="museumPagination" ng-mouseenter="showLoad=true" ng-mouseleave="showLoad=false">
                    <td>{{museum.name}}</td>
                    <td>{{museum.neighborhood.name}}</td>
                    <td>{{museum.streetNumber}} {{museum.streetName}}<br/>{{museum.city}}, {{museum.state}} {{museum.zipCode}}</td>
                    <td><div class="pull-right">
                        <button class="btn btn-primary" ng-show="showLoad" ng-click="$mainController.loadRestaurants(museum)">Load Restaurants</button>
                    </div></td>

                </tr>
                </tbody>
            </table>
        </div>
        <div class="panel-footer clearfix">
            <dir-pagination-controls pagination-id="museumPagination"
                                     max-size="5"
                                     direction-links="true"
                                     boundary-links="true" >
            </dir-pagination-controls>
        </div>
    </div>
    <div uib-collapse="$mainController.restaurantPanelHidden" id="restaurantPanel" expanded="$mainController.goToRestaurants()">
        <div class="panel panel-default">
            <div class="panel-heading clearfix">
                <h4 class="panel-title pull-left">Restaurants in {{$mainController.restaurantNeighborhood.name}}</h4>
            </div>
            <div class="panel-body">
                <form class="form-inline">
                    <button class="btn btn-success" ng-click="$mainController.openAddNewRestaurantPopup()">
                        <i class="glyphicon glyphicon-plus"></i> Add New Restaurant
                    </button>
                    <button class="btn btn-primary" ng-click="$mainController.openMapPopup()">
                        <i class="glyphicon glyphicon-map-marker"></i> View on Map
                    </button>
                    <div class="form-group pull-right">
                        <input type="text" ng-model="searchRestaurant" class="form-control" placeholder="Search">
                    </div>
                </form>
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th ng-click="$mainController.restaurantSort('name')">Name
                            <span class="glyphicon sort-icon" ng-show="$mainController.restaurantSortKey=='name'" ng-class="{'glyphicon-chevron-up':$mainController.restaurantReverse,'glyphicon-chevron-down':!$mainController.restaurantReverse}"/></th>
                        <th>Address</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr dir-paginate="restaurant in $mainController.restaurants|orderBy:$mainController.restaurantSortKey:$mainController.restaurantReverse|filter:searchRestaurant|itemsPerPage:5|captureItems:'currentPageRestaurants':$mainController"
                        pagination-id="restaurantPagination" ng-mouseenter="showEdit=true" ng-mouseleave="showEdit=false"
                        current-page="$mainController.currentPage">
                        <td>{{restaurant.name}}</td>
                        <td>{{restaurant.streetNumber}} {{restaurant.streetName}}<br/>{{restaurant.city}}, {{restaurant.state}} {{restaurant.zipCode}}</td>
                        <td><div class="pull-right">
                            <button class="btn btn-warning" ng-show="showEdit" ng-click="$mainController.openUpdateRestaurantPopup(restaurant)">Edit</button>
                            <button class="btn btn-danger" ng-show="showEdit" ng-click="$mainController.openDeleteRestaurantPopup(restaurant)">Delete</button>
                        </div></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="panel-footer clearfix">
                <dir-pagination-controls pagination-id="restaurantPagination"
                                         max-size="5"
                                         direction-links="true"
                                         boundary-links="true" >
                </dir-pagination-controls>
            </div>
        </div>
    </div>
</div>